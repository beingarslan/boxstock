import{_ as E,r as f,a8 as F,a9 as M,aa as O,z as H,p as T,a as m,o as P,c as j,b as d,d as l,w as n,e as c,ab as U,t as A,Q as N,f as L,h as _}from"./app.67f4f754.js";const b=f(!1);let w=[];const R=f(""),B=()=>{b.value=!1},G=k=>{let a=localStorage.getItem("token");c({method:"DELETE",url:"/variants/"+k,headers:{Authorization:"Bearer "+a}}).then(x=>{window.location.reload()})},Q={components:{AdminHeaderVue:F,LoadingOutlined:M,PlusOutlined:O},setup(){const k=[{title:"Name",dataIndex:"name"},{title:"Price",dataIndex:"amount"},{title:"Products",dataIndex:"product",slots:{customRender:"product"}},{title:"Action",dataIndex:"operation",slots:{customRender:"operation"}}],a=f(),x=f(),e=f(),v=f(),h=f(),s=H({name:"",variant_status:"",stock:"",amount:"",product_id:"",size_id:""}),V=o=>{b.value=!0;let r=localStorage.getItem("token");c({method:"GET",url:"/variants/"+o+"/edit",headers:{Authorization:"Bearer "+r}}).then(i=>{e.value=i.data.variant.id,s.name=i.data.variant.name,s.variant_status=i.data.variant.status,s.stock=i.data.variant.stock,s.amount=i.data.variant.amount,s.size_id=i.data.variant.sizes,s.product_id=i.data.variant.products})},p=o=>{v.value=w.filter(r=>r.status.toLowerCase().indexOf(o.target.value.toLowerCase())>-1)},u=o=>{v.value=w.filter(r=>r.products.name.toLowerCase().indexOf(o.target.value.toLowerCase())>-1)},g={name:[{required:!0,message:"Please insert name",trigger:"blur"}],variant_status:[{required:!0,message:"Please select status",trigger:"blur"}],stock:[{required:!0,message:"Please insert stock",trigger:"blur"}],amount:[{required:!0,message:"Please insert amount",trigger:"blur"}],product_id:[{required:!0,message:"Please select product",trigger:"blur"}],size_id:[{required:!0,message:"Please select size",trigger:"blur"}]},z=()=>{h.value.validate().then(()=>{let o=U(s),r=localStorage.getItem("token");c({method:"POST",url:"/variants/",headers:{Authorization:"Bearer "+r,"content-type":"multipart/form-data"},data:o}).then(i=>{window.location.reload(),B()})}).catch(o=>{console.log("error",o)})},S=()=>{h.value.resetFields()},y=()=>{b.value=!0,S()},t=o=>{let r=localStorage.getItem("token"),i=U(s);c({method:"PUT",url:"/variants/"+o,headers:{Authorization:"Bearer "+r},data:i}).then(se=>{B(),window.location.reload(),b.value=!1})},C=o=>{c.get("/variants",{headers:{Authorization:"Bearer "+o}}).then(r=>{v.value=r.data.variant,w=r.data.variant})},D=o=>{c.get("/sizes",{headers:{Authorization:"Bearer "+o}}).then(r=>{x.value=r.data.size})},I=o=>{c.get("/products",{headers:{Authorization:"Bearer "+o}}).then(r=>{a.value=r.data.product})};function q(o){const r=o.target.files[0];R.value=URL.createObjectURL(r)}return T(()=>{let o=localStorage.getItem("token");D(o),I(o),C(o)}),{data:v,columns:k,visible:b,closeModal:B,updateHandler:t,deleteHandler:G,formRef:h,labelCol:{span:8},wrapperCol:{span:12},other:"",formState:s,rules:g,onSubmit:z,resetForm:S,imageUrl:R,onFileChange:q,sizes:x,products:a,getProducts:I,getVariants:C,addNewModal:y,editModal:V,filterByCategoryName:p,filterByProductName:u,pId:e,filterData:w}}},J={class:"retailers"},K={class:"container"},W={class:"text-right mt-[100px] mb-[10px]"},X=_(" Add new "),Y={class:"flex items-center flex-wrap gap-[20px] mb-[20px]"},Z=d("span",null,"Product name: ",-1),$=d("span",null,"Variant name: ",-1),ee={class:"flex gap-[10px] items-center"},te=_("Edit"),ae=_("Delete"),oe=_("Update"),le=_("Save"),ne=_("Reset");function re(k,a,x,e,v,h){const s=m("v-btn"),V=m("a-table"),p=m("a-input"),u=m("a-form-item"),g=m("v-combobox"),z=m("a-form"),S=m("v-card"),y=m("v-dialog");return P(),j("div",J,[d("div",K,[d("div",W,[l(s,{onClick:e.addNewModal},{default:n(()=>[X]),_:1},8,["onClick"])]),d("div",Y,[d("div",null,[Z,d("input",{onInput:a[0]||(a[0]=t=>e.filterByProductName(t)),class:"py-[10px] border border-[#f5f5f5] px-[10px]",type:"text",placeholder:"Filter by product name"},null,32)]),d("div",null,[$,d("input",{onInput:a[1]||(a[1]=t=>e.filterByCategoryName(t)),class:"py-[10px] border border-[#f5f5f5] px-[10px]",type:"text",placeholder:"Filter by variant name"},null,32)])]),l(V,{columns:e.columns,"data-source":e.data,bordered:""},{name:n(({text:t})=>[d("a",null,A(t),1)]),product:n(({record:t})=>[d("span",null,A(t.products.name),1)]),operation:n(({record:t})=>[d("div",ee,[l(s,{onClick:C=>e.editModal(t.id)},{default:n(()=>[te]),_:2},1032,["onClick"]),l(s,{class:"!bg-[#ff4d4f]",type:"danger",onClick:C=>e.deleteHandler(t.id)},{default:n(()=>[ae]),_:2},1032,["onClick"])])]),_:1},8,["columns","data-source"])]),l(y,{modelValue:e.visible,"onUpdate:modelValue":a[9]||(a[9]=t=>e.visible=t),width:"auto"},{default:n(()=>[l(S,{class:"product-form"},{default:n(()=>[l(z,{ref:"formRef",model:e.formState,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:n(()=>[l(u,{ref:"name",label:"Variant name",name:"name"},{default:n(()=>[l(p,{value:e.formState.name,"onUpdate:value":a[2]||(a[2]=t=>e.formState.name=t)},null,8,["value"])]),_:1},512),l(u,{ref:"variant_status",label:"Variant status",name:"variant_status"},{default:n(()=>[l(g,{label:"Combobox",modelValue:e.formState.variant_status,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formState.variant_status=t),"item-value":"id","item-title":"title",items:["Doos onbeschadigd","Doos kleine beschadiging","Doos beschadigd"]},null,8,["modelValue"])]),_:1},512),l(u,{ref:"sku",label:"Stock",name:"stock"},{default:n(()=>[l(p,{value:e.formState.stock,"onUpdate:value":a[4]||(a[4]=t=>e.formState.stock=t)},null,8,["value"])]),_:1},512),l(u,{ref:"amount",label:"Amount",name:"amount"},{default:n(()=>[l(p,{value:e.formState.amount,"onUpdate:value":a[5]||(a[5]=t=>e.formState.amount=t)},null,8,["value"])]),_:1},512),l(u,{label:"Size",name:"size_id"},{default:n(()=>[l(g,{label:"Select size",modelValue:e.formState.size_id,"onUpdate:modelValue":a[6]||(a[6]=t=>e.formState.size_id=t),items:e.sizes,"item-value":"id","item-title":"name"},null,8,["modelValue","items"])]),_:1}),l(u,{label:"Product",name:"product_id"},{default:n(()=>[l(g,{label:"Select product",modelValue:e.formState.product_id,"onUpdate:modelValue":a[7]||(a[7]=t=>e.formState.product_id=t),items:e.products,"item-value":"id","item-title":"name"},null,8,["modelValue","items"])]),_:1}),l(u,{"wrapper-col":{span:14,offset:4}},{default:n(()=>[e.pId?(P(),N(s,{key:0,onClick:a[8]||(a[8]=t=>e.updateHandler(e.pId))},{default:n(()=>[oe]),_:1})):L("",!0),e.pId?L("",!0):(P(),N(s,{key:1,onClick:e.onSubmit},{default:n(()=>[le]),_:1},8,["onClick"])),l(s,{type:"danger",style:{"margin-left":"10px"},onClick:e.resetForm},{default:n(()=>[ne]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules","label-col","wrapper-col"])]),_:1})]),_:1},8,["modelValue"])])}const ie=E(Q,[["render",re]]);export{ie as default};
