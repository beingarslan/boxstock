import{_ as V,r as p,z,a8 as E,p as H,e as f,a as i,o as c,c as v,b as l,d as r,w as o,ab as S,t as g,J as D,K as L,f as h,Q as B,h as m}from"./app.67f4f754.js";const b=p(!1),y=p(),I=p(),A=p();let k=[];const U=()=>{y.value="Add new brand",b.value=!0},P=n=>{y.value="Edit brand",b.value=!0;let t=localStorage.getItem("token");t&&f.get("/brands/"+n+"/edit",{headers:{Authorization:"Bearer "+t}}).then(d=>{_.name=d.data.brand.name,A.value=d.data.brand.id})},R=n=>{b.value=!1;let t=localStorage.getItem("token");f({method:"PUT",url:"/brands/"+n,headers:{Authorization:"Bearer "+t},data:S(_)}).then(d=>{C(),window.location.reload()})},F=n=>{let t=localStorage.getItem("token");f({method:"DELETE",url:"/brands/"+n,headers:{Authorization:"Bearer "+t}}).then(d=>{C(),window.location.reload()})},_=z({name:""}),O=()=>{if(!_.name)return I.value="Brand name required.",!1;let n=localStorage.getItem("token");f({method:"POST",url:"/brands/",headers:{Authorization:"Bearer "+n},data:S(_)}).then(t=>{window.location.reload()})},C=()=>{b.value=!1},J={components:{AdminHeaderVue:E},setup(){const n=p();return H(()=>{let e=localStorage.getItem("token");f.get("/brands",{headers:{Authorization:"Bearer "+e}}).then(u=>{n.value=u.data.brand,k=u.data.brand})}),{data:n,columns:[{title:"Title",dataIndex:"name"},{title:"Products",dataIndex:"product",slots:{customRender:"product"}},{title:"Action",dataIndex:"operation",slots:{customRender:"operation"}}],visible:b,formState:_,requiredMsg:I,catId:A,editModal:P,modalTitle:y,closeModal:C,onSubmit:O,addCategory:U,updateHandler:R,filterData:k,filterByCategoryName:e=>{n.value=k.filter(u=>u.name.toLowerCase().indexOf(e.target.value.toLowerCase())>-1)},deleteHandler:F}}},K={class:"retailers"},Q={class:"container"},j={class:"text-right mt-[100px] mb-[10px]"},G=m("Add new"),W={class:"flex items-center flex-wrap gap-[20px] mb-[20px]"},X=l("span",null,"Brand name: ",-1),Y=m("Edit"),Z=m("Delete"),$={key:0,role:"alert",class:"text-red-700 text-[12px]"},ee=m("Update"),te=m("Save"),ae=m("Cancel");function oe(n,t,d,e,u,ne){const s=i("a-button"),M=i("a-table"),q=i("a-input"),w=i("a-form-item"),N=i("a-form"),T=i("a-modal");return c(),v("div",K,[l("div",Q,[l("div",j,[r(s,{class:"mr-[10px]",type:"primary",onClick:e.addCategory},{default:o(()=>[G]),_:1},8,["onClick"])]),l("div",W,[l("div",null,[X,l("input",{onInput:t[0]||(t[0]=a=>e.filterByCategoryName(a)),class:"py-[10px] border border-[#f5f5f5] px-[10px]",type:"text",placeholder:"Filter by brand name"},null,32)])]),r(M,{columns:e.columns,"data-source":e.data,bordered:""},{name:o(({text:a})=>[l("a",null,g(a),1)]),product:o(({record:a})=>[(c(!0),v(D,null,L(a.products,x=>(c(),v("span",null,g(x.name),1))),256))]),operation:o(({record:a})=>[r(s,{class:"mr-[10px]",type:"primary",onClick:x=>e.editModal(a.id)},{default:o(()=>[Y]),_:2},1032,["onClick"]),r(s,{class:"mr-[10px]",type:"danger",onClick:x=>e.deleteHandler(a.id)},{default:o(()=>[Z]),_:2},1032,["onClick"])]),_:1},8,["columns","data-source"])]),r(T,{visible:e.visible,"onUpdate:visible":t[3]||(t[3]=a=>e.visible=a),title:e.modalTitle},{default:o(()=>[r(N,{model:e.formState},{default:o(()=>[r(w,{label:"Brand name"},{default:o(()=>[r(q,{"aria-required":"true",required:"required",value:e.formState.name,"onUpdate:value":t[1]||(t[1]=a=>e.formState.name=a)},null,8,["value"]),e.requiredMsg?(c(),v("span",$,g(e.requiredMsg),1)):h("",!0)]),_:1}),r(w,{"wrapper-col":{span:14,offset:4}},{default:o(()=>[e.catId?(c(),B(s,{key:0,type:"primary",onClick:t[2]||(t[2]=a=>e.updateHandler(e.catId))},{default:o(()=>[ee]),_:1})):h("",!0),e.catId?h("",!0):(c(),B(s,{key:1,type:"primary",onClick:e.onSubmit},{default:o(()=>[te]),_:1},8,["onClick"])),r(s,{style:{"margin-left":"10px"},onClick:e.closeModal},{default:o(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}const le=V(J,[["render",oe]]);export{le as default};
